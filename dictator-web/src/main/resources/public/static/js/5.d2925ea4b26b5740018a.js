webpackJsonp([5],{"7Q02":function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"\n.el-pagination[data-v-02efb382] {\n  margin-top: 10px;\n}\n.form[data-v-02efb382] {\n  width: 500px;\n}\n",""])},COTu:function(e,t,i){"use strict";t.a=function(){return Object(l.a)({url:"/group/list"})};var l=i("vLgD")},Nnwf:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i("woOf"),o=i.n(l),a=i("vLgD"),n=i("zL8q"),r=i("V/Yq"),c=i("COTu");var u={name:"configTable",data:function(){return{listLoading:!0,tableData:[],listQuery:{pageNum:1,pageSize:10,configName:"",groupName:""},editForm:{showForm:!1,id:-1,appId:"",deploymentId:"",profileId:"",groupId:"",configName:"",configValue:""},profileList:[],groupList:[]}},methods:{onSubmit:function(){var e,t=this;(e=this.editForm,Object(a.a)({url:"/config/saveOrUpdate",data:e})).then(function(){t.clearForm(),t.fetchData()})},onQueryFormSubmit:function(){this.fetchData()},onPageNumChange:function(e){this.listQuery.pageNum=e,this.fetchData()},onPageSizeChange:function(e){this.listQuery.pageSize=e,this.fetchData()},handleDelete:function(e){var t=this;n.MessageBox.confirm("删除后可以在配置历史里恢复,确认删除?","提示",{type:"warning",confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){Object(a.a)({url:"config/delete",data:{id:e.id}}).then(function(){t.fetchData()})}).catch(function(){})},handleEdit:function(e){o()(this.editForm,e),this.handleAdd()},handleAdd:function(){this.fetchProfile(),this.fetchGroup(),this.editForm.showForm=!0},clearForm:function(){this.editForm.showForm=!1,this.editForm.appId="",this.editForm.deploymentId="",this.editForm.profileId="",this.editForm.groupId="",this.editForm.configName="",this.editForm.configValue="",this.editForm.id=-1},fetchData:function(){var e,t=this;this.listLoading=!0,(e=this.listQuery,Object(a.a)({url:"/config/list",data:e})).then(function(e){var i=e.data,l=i.list;t.tableData=l,t.listQuery.currentPage=i.pageSize,t.listQuery.total=i.total,t.listLoading=!1}).catch(function(){t.listLoading=!1})},fetchProfile:function(){var e=this;Object(r.a)().then(function(t){var i=t.data;e.profileList=i})},fetchGroup:function(){var e=this;Object(c.a)().then(function(t){var i=t.data;e.groupList=i})}},created:function(){this.fetchData(),this.fetchGroup(),this.fetchProfile()}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-header",[i("el-form",{attrs:{model:e.listQuery,inline:!0}},[i("el-form-item",{attrs:{label:"应用ID"}},[i("el-input",{model:{value:e.listQuery.appId,callback:function(t){e.$set(e.listQuery,"appId",t)},expression:"listQuery.appId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"配置名"}},[i("el-input",{model:{value:e.listQuery.configName,callback:function(t){e.$set(e.listQuery,"configName",t)},expression:"listQuery.configName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"部署ID"}},[i("el-input",{model:{value:e.listQuery.deploymentId,callback:function(t){e.$set(e.listQuery,"deploymentId",t)},expression:"listQuery.deploymentId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"环境"}},[i("el-select",{model:{value:e.listQuery.profileId,callback:function(t){e.$set(e.listQuery,"profileId",t)},expression:"listQuery.profileId"}},e._l(e.profileList,function(e){return i("el-option",{key:e.profileName,attrs:{label:e.profileName,value:e.id}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"分组"}},[i("el-select",{model:{value:e.listQuery.groupId,callback:function(t){e.$set(e.listQuery,"groupId",t)},expression:"listQuery.groupId"}},e._l(e.groupList,function(e){return i("el-option",{key:e.groupName,attrs:{label:e.groupName,value:e.id}})}))],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onQueryFormSubmit}},[e._v("查询")])],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{icon:"el-icon-circle-plus-outline"},on:{click:e.handleAdd}},[e._v("增加")])],1)],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.tableData,border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{prop:"id",label:"id",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"appId",label:"应用ID",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"deploymentId",label:"部署ID",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"profileName",label:"环境",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"groupName",label:"分组",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"configName",label:"配置名",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"configValue",label:"属性值",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"version",label:"版本",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createdTime",label:"创建时间",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updatedTime",label:"修改时间",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{icon:"el-icon-edit"},on:{click:function(i){e.handleEdit(t.row)}}}),e._v(" "),i("el-button",{attrs:{icon:"el-icon-delete"},on:{click:function(i){e.handleDelete(t.row)}}})]}}])})],1),e._v(" "),i("el-footer",[i("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next",data:e.listQuery,"current-page":e.listQuery.pageNum,total:e.listQuery.total},on:{"current-change":e.onPageNumChange,"size-change":e.onPageSizeChange,"update:currentPage":function(t){e.$set(e.listQuery,"pageNum",t)}}})],1),e._v(" "),i("el-dialog",{attrs:{visible:e.editForm.showForm,width:"600px",title:"配置"},on:{"update:visible":function(t){e.$set(e.editForm,"showForm",t)}}},[i("el-form",{attrs:{"label-width":"80px"},model:{value:e.editForm,callback:function(t){e.editForm=t},expression:"editForm"}},[i("el-input",{attrs:{type:"hidden"},model:{value:e.editForm.id,callback:function(t){e.$set(e.editForm,"id",t)},expression:"editForm.id"}}),e._v(" "),i("el-form-item",{attrs:{label:"应用ID"}},[i("el-input",{model:{value:e.editForm.appId,callback:function(t){e.$set(e.editForm,"appId",t)},expression:"editForm.appId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"部署ID"}},[i("el-input",{model:{value:e.editForm.deploymentId,callback:function(t){e.$set(e.editForm,"deploymentId",t)},expression:"editForm.deploymentId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"环境"}},[i("el-select",{model:{value:e.editForm.profileId,callback:function(t){e.$set(e.editForm,"profileId",t)},expression:"editForm.profileId"}},e._l(e.profileList,function(e){return i("el-option",{key:e.profileName,attrs:{label:e.profileName,value:e.id}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"分组"}},[i("el-select",{model:{value:e.editForm.groupId,callback:function(t){e.$set(e.editForm,"groupId",t)},expression:"editForm.groupId"}},e._l(e.groupList,function(e){return i("el-option",{key:e.groupName,attrs:{label:e.groupName,value:e.id}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"配置名"}},[i("el-input",{model:{value:e.editForm.configName,callback:function(t){e.$set(e.editForm,"configName",t)},expression:"editForm.configName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"属性值"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.editForm.configValue,callback:function(t){e.$set(e.editForm,"configValue",t)},expression:"editForm.configValue"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")]),e._v(" "),i("el-button",{on:{click:function(t){e.editForm.showForm=!1}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var d=i("VU/8")(u,s,!1,function(e){i("rBPx")},"data-v-02efb382",null);t.default=d.exports},"V/Yq":function(e,t,i){"use strict";t.a=function(){return Object(l.a)({url:"/profile/list"})};var l=i("vLgD")},rBPx:function(e,t,i){var l=i("7Q02");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);i("rjj0")("46c0e373",l,!0)}});